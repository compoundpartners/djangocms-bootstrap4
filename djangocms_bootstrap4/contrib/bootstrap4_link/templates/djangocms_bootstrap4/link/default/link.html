{% load cms_tags google_tag_manager_tags %}{% spaceless %}

{# this needs to be in one line for rendering purpose #}
{% endspaceless %}<a href="{{ link }}"{% if instance.target %} target="{{ instance.target }}"{% endif %}{% if instance.attributes %} {{ instance.attributes_str }}{% endif %}>{% if instance.icon_left %}{% with icon_class=instance.icon_left instance=instance.icon_left %}{% include "djangocms_icon/includes/icon.html" %}{% endwith %}{% endif %}{% for plugin in instance.child_plugin_instances %}{% render_plugin plugin %}{% empty %}{{ instance.name }}{% endfor %}{% if instance.icon_right %}{% with icon_class=instance.icon_right instance=instance.icon_right %}{% include "djangocms_icon/includes/icon.html" %}{% endwith %}{% endif %}</a>

<script>
  {% if instance.external_link %}
  dataLayer = [{
      "eventCategory": "Link/Button",
      "eventAction": "Link",
      "eventLabel": "{{ instance.external_link }}"
  }];
  {% elif instance.mailto %}
  dataLayer = [{
      "eventCategory": "Link/Button",
      "eventAction": "Contact",
      "eventLabel": "{{ instance.mailto }}"
  }];
  {% elif instance.phone %}
  dataLayer = [{
      "eventCategory": "Link/Button",
      "eventAction": "Call",
      "eventLabel": "{{ article.title }}"
  }];
  {% endif %}
</script>
{% google_tag_manager %}
